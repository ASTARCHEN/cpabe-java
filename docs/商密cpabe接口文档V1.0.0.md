# 接口文档
更新说明

|日期|版本号|更新人|说明|
|:---:|:---:|:---:|:---:|
|2018-10-10|v1.0.0|陈小龙|创建文档|
||||
||||
||||

## 1. 登录（login）, V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|username|String|用户名|
|password|String|密码的SM3值|

- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|
|token|String|身份令牌|
|id|int|用户id|
|pk|String|用于加密的公钥（之前讨论的sk，现在是PK）|

## 2. 获取所有群列表（getClubList), V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|flag|int|标记位,若flag=1，则返回个人所在的群组列表。若flag=0,则返回所有群的列表|
|token|String|身份令牌|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|
|club|json array String|每个群组{"id":id, "clubname":"club name", "creater":creater id}|

## 3. 获取所有成员列表（getUserList），V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|clubid|int|群id,非必填项，若不填，则返回所有人信息|
|-|-|-|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|
|user|jsonObjectString|用户数组，若clubid缺省，则每个用户为jsonObject {"id": userid, "name":"user name", "email":"user e-mail"}，若clubid填写，则创建者增加字段"creater":true|

## 4.获取当前密钥SK（getSK），V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|
|sk|byte array|用户密钥字节流对应的数组|


## 5.解码文件（getMsg），V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识，此人应有超管权限|
|c|byte array|加密文件二进制流|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|
|m|byte array|解密文件二进制流|

## 6. 创建群（createClub）,V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识，此人应有超管权限|
|clubname|String|群名|
|users|json array String|初始用户数组，每一个用户信息{"id": "user id"}|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|

## 7. 删除群（deleteClub）,V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识，此人应有超管权限或者是群创建者|
|clubid|String|群id|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|

## 8. 邀请不在群组内的人入群（joinClub）,V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识，此人应在群内|
|clubid|int|群id|
|user|**json array String**|用户集合，每一个用户为{"id": userid}|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|

## 9. 从群组中退出（exitClub）V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识|
|clubid|int|群id|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|

## 10. 在群组中删除某些人（deleteUser）V1.0.0
- 输入

|参数|类型|描述| 
|:---:|:---:|:---:|
|token|String|用户标识, 此人应为超管或者群组创建者|
|clubid|int|群id
|user|**json array String**|其中，每一个用户{"id":userid}|
- 输出

|参数|类型|描述| 
|:---:|:---:|:---|
|code|int|成功状态，参考附录 code的定义|


## 附件
code的定义


|代码|	说明|
|:---:|:---:|
|-1|	未知错误|
|0|	操作失败|
|1|操作成功|
|2|	参数有误|
|3	|ToKen失效|
|4	|数据库错误|
|5|	该账户已在其他设备登录，已退出|
|6|	账户被锁定、禁用|
|7	|同一终端登录失败次数超过限制|
|8|	同一账户登录失败次数超过限制|
|99|	后台处于维护状态|
